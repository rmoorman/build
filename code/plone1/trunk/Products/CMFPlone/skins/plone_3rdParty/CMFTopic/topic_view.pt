<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
 "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns:tal="http://xml.zope.org/namespaces/tal"
    xmlns:metal="http://xml.zope.org/namespaces/metal"
    metal:use-macro="container/main_template/macros/master"
    i18n:domain="plone">

    <metal:block fill-slot="base">
            <base href=""
                  tal:attributes="href python: here.absolute_url() + '/'">
    </metal:block>

<body>

<div metal:fill-slot="main">


    <h1 tal:content="structure here/title_or_id">
    Title or id
    </h1>
    
    <div class="description"
         tal:content="structure here/Description"> 
    description
    </div>

    <metal:block tal:define="
                 b_start string:0;b_start request/b_start | b_start;
                 results here/queryCatalog;
                 Batch python:modules['Products.CMFPlone'].Batch;
                 global batch python:Batch(results, 20, int(b_start), orphan=1)">


    <!-- Navigation -->
    <div metal:use-macro="here/batch_macros/macros/navigation" />
                 
    <table class="listing"
           id="sortable"
           tal:condition="batch">

        <thead>
            <tr>
                <th>&nbsp;<span i18n:translate="listingheaders_title" tal:omit-tag="">Title</span>&nbsp;</th>
                <th>&nbsp;<span i18n:translate="listingheaders_type" tal:omit-tag="">Type</span>&nbsp;</th>
                <th>&nbsp;<span i18n:translate="listingheaders_last_modified" tal:omit-tag="">Last Modified</span>&nbsp;</th>
                <th>&nbsp;<span i18n:translate="listingheaders_description" tal:omit-tag="">Description</span>&nbsp;</th>
            </tr>
        </thead>
    
        <tbody>
        <metal:block tal:repeat="match batch">
        <tr class="even" 
            tal:define="oddrow repeat/match/odd" 
            tal:attributes="class python:test(oddrow, 'even', 'odd')" >
        <td>                
        <a href="#" 
           tal:attributes="href string:${match/getURL}/view"
           tal:define="match_title match/Title/strip">
           <img src="#" tal:attributes="src string:${here/portal_url}/${match/getIcon}" />
           <span tal:replace="match_title|match/getId">Title or id</span>
        </a>
        </td>   
        <td i18n:translate="" tal:content="match/Type">Type</td>
        <td tal:content="python:here.toPortalTime(match.ModificationDate)">Modification Date</td>
        <td tal:content="structure python:test(match.Description, match.Description, '&nbsp;')">Description</td>
        </tr>
        </metal:block>
        </tbody>
    </table>

    <!-- Navigation -->
    <div metal:use-macro="here/batch_macros/macros/navigation" />

    <metal:block tal:define="topics python:here.objectValues( [ 'Portal Topic' ] )" tal:condition="topics">

    <h2 i18n:translate="heading_sub_topics">Sub-topics</h2>
    
    <ul>
        <li tal:repeat="topic topics">
            <p>
                <a href=""
                    tal:define="topictitle python:topic.Title() or topic.getId()"
                    tal:attributes="href topic/absolute_url"
                    tal:content="topictitle">
                        Topic Title
                </a>
            </p>
        </li>
    </ul>    
    
    </metal:block>

    <div tal:condition="not: results">
        <p><strong i18n:translate="no_results_found"> No results match your criteria. </strong></p>
    </div>

    </metal:block>
    
</div>

</body>
</html>
