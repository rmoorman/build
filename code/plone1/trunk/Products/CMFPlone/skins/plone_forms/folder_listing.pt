<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en-US"
      lang="en-US"
      metal:use-macro="here/main_template/macros/master"
      i18n:domain="plone">

<body>

    <div metal:fill-slot="main">

        <div class="contentHeader">
        <h1 tal:content="here/title_or_id">Title or id</h1>
        </div>

        <div class="description"
             tal:content="structure here/Description"> description </div>

        <div tal:condition="python:not getattr(here.aq_explicit, 'index_html', None) and
                           here.portal_membership.checkPermission('Add portal content', here)">

            <p i18n:translate="description_no_default_folder_create_new">
            This folder does not have a default page, therefore a list of items
            is shown instead.
            If you want to create a default page in this folder that will
            replace the item listing, click the button.
            </p> 
            
            <form action=""
                  method="post"
                  tal:attributes="action string:${here/absolute_url}/invokeFactory">
                <input type="hidden" 
                       name="id" 
                       value="index_html"/>
                <input type="hidden" 
                       name="type_name" 
                       value="Document"/>
                <input class="standalone"
                       type="submit"
                       value="Create default document" 
                       i18n:attributes="value"
                       />
            </form>         
        </div>

        <p>
            <a href="" 
               tal:define="parent_url python:here.navigationParent(here, template.getId())"
               tal:attributes="href parent_url"
               i18n:translate="go_to_parent_url">
            Up one level
            </a>
        </p>
       
        <table class="listing"
               id="sortable"
               tal:condition="here/contentValues">
         
            <thead tal:define="global getObjSize nocall:here/getObjSize;
                               global toPortalTime nocall:here/toPortalTime;">
                <tr>
                    <th>&nbsp;<span i18n:translate="listingheaders_title" tal:omit-tag="">Title</span>&nbsp;</th>
                    <th>&nbsp;<span i18n:translate="listingheaders_type" tal:omit-tag="">Type</span>&nbsp;</th>
                    <th>&nbsp;<span i18n:translate="listingheaders_size" tal:omit-tag="">Size</span>&nbsp;</th>
                    <th>&nbsp;<span i18n:translate="listingheaders_last_modified" tal:omit-tag="">Last Modified</span>&nbsp;</th>
                    <th>&nbsp;<span i18n:translate="listingheaders_description" tal:omit-tag="">Description</span>&nbsp;</th>
                </tr>
            </thead>

            <tbody>
	        <metal:block tal:repeat="obj python:here.getFolderContents(suppressHiddenFiles=1)">
                <tr class="even" 
                    tal:define="oddrow repeat/obj/odd" 
                    tal:attributes="class python:test(oddrow, 'even', 'odd')" >
                    <td>
		        <img src="#" tal:attributes="src string:${here/portal_url}/${obj/getIcon}" />
			<a href="#" tal:attributes="href string:${obj/absolute_url}/view"
                           tal:content="obj/title_or_id" />
                    </td>   
                    <td i18n:translate="" tal:content="obj/Type">Type</td>
                    <td tal:content="structure python:test(hasattr(obj, 'get_size'), getObjSize(obj), '&nbsp;')">Size</td>
                    <td tal:content="python:toPortalTime(obj.ModificationDate())">Modification Date</td>
                    <td tal:content="structure python:test(obj.Description(), obj.Description(), '&nbsp;')"> description </td>
                </tr>
		</metal:block>
            </tbody>
        </table>

        <p tal:condition="not: here/contentValues" i18n:translate="description_no_items_in_folder">
         There are currently no items in this folder.
        </p>        

    </div>

</body>
</html>
