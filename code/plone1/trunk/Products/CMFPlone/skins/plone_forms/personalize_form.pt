<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
 "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en-US"
      lang="en-US"
      metal:use-macro="here/main_template/macros/master"
      i18n:domain="plone">

<tal:block metal:fill-slot="base">
   <tal:block tal:define="dummy python:request.set('disable_border',1)" />
</tal:block>

<body>
			
<div metal:fill-slot="main"
     tal:define="errors python:request.get('errors', {})"
     tal:condition="here/rejectAnonymous" >

    
    <span tal:define="dummy python:request.response.setHeader('pragma','no-cache')" />

    <h1 i18n:translate="heading_my_preferences">My Preferences</h1>

    <p> 
        <a href="password_form" i18n:translate="description_click_to_change_password">Click here to change your password.</a> 
    </p>
      
  
    <metal:block tal:condition="not: here/portal_membership/isAnonymousUser"
                 tal:define="member container/portal_membership/getAuthenticatedMember | nothing">

        <form class="group"
              action="personalize" 
              method="post"
              enctype="multipart/form-data" 
              tal:condition="member"
              tal:attributes="action python:here.portal_form_url(template.id)">
        
            <span class="legend" i18n:translate="legend_member_details">Member Details</span>

            <div class="row"
                 tal:define="error_fullname errors/fullname | nothing;
                             fullname python:request.get('fullname', member.getProperty('fullname'));">
                
                <div class="label">
                    <span i18n:translate="label_full_name">Full name</span>

                    <div id="full_name_help"
                         i18n:translate="help_full_name" 
                         class="help" 
                         style="visibility:hidden">
                    You can change your full name here.
                    </div>
                </div>
                
                <div class="field" tal:attributes="class python:test(error_fullname, 'field error', 'field')"> 
                    
                    <div tal:condition="error_fullname">
                        <tal:block i18n:translate="" content="error_fullname">Error</tal:block>
                        <br />
                    </div>
                    
                    <input type="text" 
                           name="fullname" 
                           size="25"
                           tabindex=""
                           value="member.fullname html_quote"
                           onfocus="formtooltip('full_name_help',1)" 
                           onblur="formtooltip('full_name_help',0)" 
                           tal:attributes="value fullname;
                                           tabindex tabindex/next;" 
                           />
                </div>

            </div>
		
            <div class="row"
                 tal:define="error_email errors/email | nothing;
                             email python:request.get('email', member.getProperty('email'));">
                
                <div class="label required">
                    <span i18n:translate="label_email">E-mail</span>

                    <div id="new_email_help"
                         i18n:translate="help_new_email" 
                         class="help" 
                         style="visibility:hidden">
                    Enter your new e-mail address here, if you want to change it.
                    </div>
                </div>
                
                <div class="field" tal:attributes="class python:test(error_email, 'field error', 'field')"> 
                    <div tal:condition="error_email">
                        <tal:block i18n:translate="" content="error_email">Error</tal:block>
                        <br />
                    </div>
                    
                    <input type="text" 
                           name="email" 
                           size="25"
                           tabindex=""
                           value="member.email html_quote"
                           onfocus="formtooltip('new_email_help',1)" 
                           onblur="formtooltip('new_email_help',0)" 
                           tal:attributes="value email;
                                           tabindex tabindex/next;" 
                           />
                </div>

            </div>

            <div class="row">
                <div class="label">
                    <span i18n:translate="label_content_editor">Content editor</span>
                    
                    <div id="wysiwyg_editor_help"
                         i18n:translate="help_content_editor"
                         class="help"
                         style="visibility:hidden">
                    Select the editor that you would like to use for editing
                    content more easily. Content editors
                    often have specific browser requirements.
                    </div>
                </div>
                <div class="field"
                     tal:define="wysiwyg_editor python:request.get('wysiwyg_editor', member.wysiwyg_editor)">
                     <select name="wysiwyg_editor"
                             onfocus="formtooltip('wysiwyg_editor_help',1)"
                             onblur="formtooltip('wysiwyg_editor_help',0)"
                             tabindex=""
                             tal:attributes="tabindex tabindex/next;">
                         <tal:block tal:repeat="editor site_properties/available_editors">
                         <option tal:condition="python:editor != 'None'"
                                 value="None"
                                 tal:attributes="value editor;
                                                 selected python:test(editor==wysiwyg_editor, 'selected', None);"
                                 tal:content="editor">
                         WYSIWYG-editor
                         </option>
                         <option tal:condition="python:editor == 'None'"
                                 value="None"
                                 tal:attributes="value editor;
                                                 selected python:test(editor==wysiwyg_editor, 'selected', None);"
                                 tal:content="editor"
                                 i18n:translate="label_ordinary_content_editor">
                         Ordinary Form-based Editor (works in all browsers)
                         </option>

                         </tal:block>
                     </select>
                </div>
             </div>
             
            <div class="row">
                <div class="label">
                    <span i18n:translate="label_listed_status">Listed status</span>

                    <div id="listed_status_help"
                         i18n:translate="help_listed_status" 
                         class="help" 
                         style="visibility:hidden">
                    Select whether you want to be listed on the public membership listing
                    or not.	Remember that your Member folder will still be publicly accessible unless
                    you change its security settings, even if you select 'unlisted' here.
                    </div>                
                </div>
                <div class="field"
		                 tal:define="listed python:request.get('listed', member.listed);
                                 tabindex tabindex/next;">
                    <input type="radio" 
                           class="noborder" 
                           name="listed" 
                           value="on"
                           id="cb_listed" 
                           checked="checked"
                           tabindex=""
                           onfocus="formtooltip('listed_status_help',1)" 
                           onblur="formtooltip('listed_status_help',0)"
                           tal:attributes="tabindex tabindex;" 
                           tal:condition="listed" 
                           />
                           
                    <input type="radio" 
                           class="noborder" 
                           name="listed" 
                           value="on"
                           id="cb_listed"
                           tabindex=""
                           onfocus="formtooltip('listed_status_help',1)" 
                           onblur="formtooltip('listed_status_help',0)"
                           tal:attributes="tabindex tabindex;" 
                           tal:condition="not: listed" 
                           />
                    
                    <label for="cb_listed" i18n:translate="label_member_listed">Listed</label>
                    
                    <br />
                    
                    <input type="radio" 
                           class="noborder" 
                           name="listed" 
                           value=""
                           id="cb_unlisted"
                           tabindex=""
                           onfocus="formtooltip('listed_status_help',1)" 
                           onblur="formtooltip('listed_status_help',0)"
                           tal:attributes="tabindex tabindex;" 
                           tal:condition="listed" 
                           />
                    
                    <input type="radio" 
                           class="noborder" 
                           name="listed" 
                           value=""
                           id="cb_unlisted" 
                           checked="checked"
                           tabindex=""
                           onfocus="formtooltip('listed_status_help',1)" 
                           onblur="formtooltip('listed_status_help',0)"
                           tal:attributes="tabindex tabindex;" 
                           tal:condition="not: listed " 
                           />		   
                    
                    <label for="cb_unlisted" i18n:translate="label_member_unlisted">Unlisted</label>
                </div>
            </div>

            <div class="row">
                <div class="label">
                    <span i18n:translate="label_form_help">Form Help</span>

                    <div id="formtooltips_help"
                         i18n:translate="help_form_help" 
                         class="help" 
                         style="visibility:hidden">
                    Select whether you want form help pop-ups to be displayed.
                    </div>                
                </div>
                <div class="field"
                     tal:define="formtooltips python:request.get('formtooltips', member.formtooltips);
                     tabindex tabindex/next;"> 
                    <input type="radio" 
                           class="noborder" 
                           name="formtooltips" 
                           value="on"
                           id="cb_formtooltips" 
                           checked="checked"
                           tabindex=""
                           onfocus="formtooltip('formtooltips_help',1)" 
                           onblur="formtooltip('formtooltips_help',0)"
                           tal:attributes="tabindex tabindex;" 
                           tal:condition="formtooltips" 
                           />
                           
                    <input type="radio" 
                           class="noborder" 
                           name="formtooltips" 
                           value="on"
                           id="cb_formtooltips"
                           tabindex=""
                           onfocus="formtooltip('formtooltips_help',1)" 
                           onblur="formtooltip('formtooltips_help',0)"
                           tal:attributes="tabindex tabindex;" 
                           tal:condition="not: formtooltips" 
                           />
                    
                    <label for="cb_formtooltips" i18n:translate="yes">Yes</label>
                    
                    <br />
                    
                    <input type="radio" 
                           class="noborder" 
                           name="formtooltips" 
                           value=""
                           id="cb_noformtooltips"
                           tabindex=""
                           onfocus="formtooltip('formtooltips_help',1)" 
                           onblur="formtooltip('formtooltips_help',0)"
                           tal:attributes="tabindex tabindex;"
                           tal:condition="formtooltips" 
                           />
                    
                    <input type="radio" 
                           class="noborder" 
                           name="formtooltips" 
                           value=""
                           id="cb_noformtooltips" 
                           checked="checked"
                           tabindex=""
                           onfocus="formtooltip('formtooltips_help',1)" 
                           onblur="formtooltip('formtooltips_help',0)"
                           tal:attributes="tabindex tabindex;" 
                           tal:condition="not: formtooltips" 
                           />		   
                    
                    <label for="cb_noformtooltips" i18n:translate="no">No</label>
                </div>
            </div>


            <div class="row">
                <div class="label">
                    <span i18n:translate="label_display_names">Display Names</span>

                    <div id="visible_ids_help"
                         i18n:translate="help_display_names" 
                         class="help" 
                         style="visibility:hidden">
                    Select whether you want Names (also known as IDs) to be 
                    visible and editable when editing contents. If you choose not
                    to display Names, they will be generated automatically.
                    </div>                
                </div>
                <div class="field"
           	         tal:define="visible_ids python:request.get('visible_ids', member.visible_ids);
                                 tabindex tabindex/next;"> 
                    <input type="radio" 
                           class="noborder" 
                           name="visible_ids" 
                           value="on"
                           id="cb_visible_ids" 
                           checked="checked"
                           tabindex=""
                           onfocus="formtooltip('visible_ids_help',1)" 
                           onblur="formtooltip('visible_ids_help',0)"
                           tal:attributes="tabindex tabindex;" 
                           tal:condition="visible_ids" 
                           />
                           
                    <input type="radio" 
                           class="noborder" 
                           name="visible_ids" 
                           value="on"
                           id="cb_visible_ids"
                           tabindex=""
                           onfocus="formtooltip('visible_ids_help',1)" 
                           onblur="formtooltip('visible_ids_help',0)" 
                           tal:attributes="tabindex tabindex;" 
                           tal:condition="not: visible_ids" 
                           />
                    
                    <label for="cb_visible_ids" i18n:translate="yes">Yes</label>
                    
                    <br />
                    
                    <input type="radio" 
                           class="noborder" 
                           name="visible_ids" 
                           value=""
                           id="cb_invisibleids"
                           tabindex=""
                           onfocus="formtooltip('visible_ids_help',1)" 
                           onblur="formtooltip('visible_ids_help',0)" 
                           tal:attributes="tabindex tabindex;" 
                           tal:condition="visible_ids" 
                           />
                    
                    <input type="radio" 
                           class="noborder" 
                           name="visible_ids" 
                           value=""
                           id="cb_invisible_ids" 
                           checked="checked"
                           tabindex=""
                           onfocus="formtooltip('visible_ids_help',1)" 
                           onblur="formtooltip('visible_ids_help',0)" 
                           tal:attributes="tabindex tabindex;" 
                           tal:condition="not: visible_ids" 
                           />		   
                    
                    <label for="cb_invisible_ids" i18n:translate="no">No</label>
                </div>
            </div>


            <div class="row" 
                 tal:condition="here/portal_skins/allow_any">
                
                <div class="label">
                    <span i18n:translate="label_look">Look</span>
                    <div id="skin_help"
                         i18n:translate="help_look" 
                         class="help" 
                         style="visibility:hidden">
                    Here you choose the appearance of the site. Several styles are available.
                    </div>
                </div>
                
                <div class="field"
		     tal:define="skinvar python:request.get(here.portal_skins.getRequestVarname(), '');
                         skindefault here/portal_skins/getDefaultSkin;
                         skincurrent python:test(skinvar, skinvar, skindefault);"> 
                    <select name="portal_skin"
                            tabindex=""
                            onfocus="formtooltip('skin_help',1)" 
                            onblur="formtooltip('skin_help',0)"
                            tal:attributes="tabindex tabindex/next;" 
                            >
                    <option value="#"
                            i18n:translate=""
                            tal:repeat="skin container/portal_skins/getSkinSelections"
                            tal:attributes="value skin;
                                            selected python:test(skincurrent==skin, 'selected', None);"
                            tal:content="skin"
                            >dummy skin</option>
                    </select>
                </div>
            </div>

            <div class="row"
                 tal:define="portrait python:here.portal_membership.getPersonalPortrait(member.getId());
                             personal python:here.portal_membership.getPersonalFolder(member.getId());"
                 tal:condition="personal">
                <div class="label">
                    <span i18n:translate="label_portrait">Portrait</span>
                    <div id="portrait_help"
                         i18n:translate="help_portrait" 
                         class="help" 
                         style="visibility:hidden">
                    To add a new portrait, click the <strong>Browse</strong> button and select
                    a picture of yourself. Recommended size is 75 pixels wide, 100 pixels tall. <br />
                    </div>
                    
                </div>
                <div class="field"> 

                    <input type="file" 
                           name="portrait" 
                           size="20" 
                           tabindex=""
                           onfocus="formtooltip('portrait_help',1)" 
                           onblur="formtooltip('portrait_help',0)"
                           tal:attributes="tabindex tabindex/next;" 
                           />
                    <br />
                    
                    <img src="" 
                         height="100"
                         width="75"
                         style="border: 1px solid black" 
                         tal:condition="portrait"
                         tal:attributes="src portrait/absolute_url" 
                         />
                </div>
            </div>

            <div class="row">
                <div class="label">&nbsp;</div>
                <div class="field">
                    <input class="context"
                           tabindex="" 
                           type="submit" 
                           value="Save" 
                           i18n:attributes="value"
                           tal:attributes="tabindex tabindex/next;" 
                           />
                </div>
            </div>
            
            <input type="hidden" name="form_submitted" value="1" tal:attributes="value template/id" />
                        
		</form>
    </metal:block>
	
    
</div>
	   
</body>
</html>

