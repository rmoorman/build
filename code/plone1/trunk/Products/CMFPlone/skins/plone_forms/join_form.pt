<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en-US"
      lang="en-US"
      metal:use-macro="here/main_template/macros/master"
      i18n:domain="plone">

<body>

<div metal:fill-slot="main"
     tal:define="errors python:request.get('errors', {})">
 
    <h1 i18n:translate="heading_registration_form">Please register</h1>

    <p i18n:translate="description_registration_form">
    By registering with us, you will have your own account with the
    possibility to have personalized content, and you will be able to add
    your own documents, images and files to the site.
    </p> 

    <form class="group"
          action="register" 
          method="post"
          tal:define="allowEnterPassword here/portal_properties/site_properties/validate_email|nothing;"
          tal:attributes="action python:here.portal_form_url(template.id)" >

        <span class="legend" i18n:translate="legend_personal_details">Personal Details</span>

        <input type="hidden" name="came_from" value=""
               tal:attributes="value request/came_from|request/HTTP_REFERER" />
        <input type="hidden" name="last_visit:date" value="ZopeTime"
               tal:attributes="value here/ZopeTime" />
        <input type="hidden" name="prev_visit:date" value="ZopeTime"
               tal:attributes="value here/ZopeTime" />

        <div class="row"
             tal:define="error_fullname errors/fullname| nothing;
                         fullname request/fullname | nothing;" >
            
            <div class="label">
                <span i18n:translate="label_full_name">Full Name</span>
                <div id="full_name_help" 
                     i18n:translate="help_full_name_creation"
                     class="help" 
                     style="visibility:hidden">
                Enter your full name, eg. John Smith.
                </div>
            </div>
            
            <div class="field"
                  tal:attributes="class python:test(error_fullname, 'field error', 'field')" >

                <div tal:condition="error_fullname">
                    <tal:block i18n:translate="" content="error_fullname">Error</tal:block>
                    <br />
                </div>

                <input type="text" 
                       name="fullname" 
                       size="30"
                       value="fullname"
                       tabindex=""
                       onfocus="formtooltip('full_name_help',1)" 
                       onblur="formtooltip('full_name_help',0)" 
                       tal:attributes="value fullname;
                                       tabindex tabindex/next;"
                       />
            </div>

        </div>
               
        <div class="row"
             tal:define="error_username errors/username| nothing;
                         username request/username | nothing;" >
            
            <div class="label required">
                <span i18n:translate="label_user_name">User Name</span>
                <div id="user_name_help" 
                     i18n:translate="help_user_name_creation"
                     class="help" 
                     style="visibility:hidden">
                Enter the user name you want, usually something like
                'jsmith'. No spaces or special characters. 
                This is the name you use to log in.
                </div>
            </div>
            
            <div class="field"
                  tal:attributes="class python:test(error_username, 'field error', 'field')" >

                <div tal:condition="error_username">
                    <tal:block i18n:translate="" content="error_username">Error</tal:block>
                    <br />
                </div>

                <input type="text" 
                       name="username" 
                       size="30"
                       value="username"
                       tabindex=""
                       onfocus="formtooltip('user_name_help',1)" 
                       onblur="formtooltip('user_name_help',0)" 
                       tal:attributes="value username;
                                       tabindex tabindex/next;"
                       />
            </div>

        </div>

        <div class="row"
             tal:define="error_email errors/email | nothing;
                         email request/email | nothing;" >

            <div class="label required">
                <span i18n:translate="label_email">E-mail</span>
                <div id="email_help" 
                     i18n:translate="help_email_creation"
                     class="help" 
                     style="visibility:hidden">
                Enter your email address. This is necessary in case you lose your
                password. We respect your privacy, and will not give the address
                away to any third parties.
                </div>            
            </div>

            <div class="field"
                  tal:attributes="class python:test(error_email, 'field error', 'field')" >
		  
                <div tal:condition="error_email">
                    <tal:block i18n:translate="" content="error_email">Error</tal:block>
                    <br />
                </div>

                <input type="text" 
                       name="email" 
                       size="30"
                       tabindex=""
                       onfocus="formtooltip('email_help',1)" 
                       onblur="formtooltip('email_help',0)" 
                       tal:attributes="value email;
                                       tabindex tabindex/next;"
                       />
            </div>
        </div>


        <div class="row" 
             tal:condition="not: allowEnterPassword"
             tal:define="error_password errors/password | nothing;
                         password request/password | nothing;" >

            <div class="label required">
                <span i18n:translate="label_password">Password</span>
                <div id="password_help" 
                     i18n:translate="help_password_creation"
                     class="help" 
                     style="visibility:hidden">
                Enter the password you want. Minimum 5 characters.
                </div>
            </div>

            <div class="field"
                  tal:attributes="class python:test(error_password, 'field error', 'field')" >
		  
                <div tal:condition="error_password">
                    <tal:block i18n:translate="" content="error_password">Error</tal:block>
                    <br />
                </div>
	       
                <input type="password" 
                       name="password" 
                       size="10"
                       value="" 
                       tabindex=""
                       onfocus="formtooltip('password_help',1)" 
                       onblur="formtooltip('password_help',0)" 
                       tal:attributes="value password;
                                       tabindex tabindex/next;" 
                       />
            </div>
        </div>

        <div class="row" 
             tal:condition="not: allowEnterPassword"
             tal:define="error_confirm errors/confirm | nothing;
                         confirm request/confirm | nothing;" >
                         
            <div class="label required">
                <span i18n:translate="label_confirm_password">Confirm <br />Password</span>
                <div id="confirm_password_help" 
                     i18n:translate="help_confirm_password"
                     class="help" 
                     style="visibility:hidden">
                Re-enter the password. Make sure the passwords are identical.
                </div>
            </div>
            
            <div class="field"
                 tal:attributes="class python:test(error_confirm, 'field error', 'field')" >
                <div tal:condition="error_confirm">
                    <tal:block i18n:translate="" content="error_confirm">Error</tal:block>
                    <br />
                </div>

                <input type="password" 
                       name="confirm" 
                       size="10" 
                       value="" 
                       tabindex=""
                       onfocus="formtooltip('confirm_password_help',1)" 
                       onblur="formtooltip('confirm_password_help',0)" 
                       tal:attributes="value confirm;
                                       tabindex tabindex/next;"
                       />
            </div>
        </div>

        <div class="row" tal:condition="not: allowEnterPassword" tal:define="mail_me request/mail_me|nothing">
                        
            <div class="label">
                <span i18n:translate="label_mail_password">Mail Password?</span>
                <div id="mail_password_help" 
                     i18n:translate="help_mail_password"
                     class="help" 
                     style="visibility:hidden">
                Check this box to have your password 
                delivered to your mailbox, so you won't lose it.
                </div>
            </div>
            
            <div class="field">
                <input type="checkbox" 
                       class="noborder" 
                       name="mail_me" 
                       size="30" 
                       id="cb_mailme" 
                       tabindex=""
                       onfocus="formtooltip('mail_password_help',1)" 
                       onblur="formtooltip('mail_password_help',0)" 
                       tal:attributes="checked python:test(mail_me, 'checked', None);
                                       tabindex tabindex/next;" 
                       />
                <label for="cb_mailme" i18n:translate="label_yes_mail_me_password">Yes, mail me my password</label>
            </div>
        </div>

        <div class="row" tal:condition="allowEnterPassword">
            <div class="label"></div>
            <div class="field" i18n:translate="label_password_will_be_mailed">
            A password will be generated and 
            e-mailed to you to complete the registration process.
            </div>
        </div>

        <div class="row">
            <div class="label">&nbsp;</div>
            <div class="field">
                <input class="context" 
                       type="submit"
                       tabindex="" 
                       name="submit" 
                       value="Register"
                       i18n:attributes="value"
                       tal:attributes="tabindex tabindex/next;" />
            </div>
        </div>

        <span tal:replace="nothing">
        ##### HIDDEN VARIABLES FOR THE FORM_TOOL -- CUT AND PASTE THESE INTO YOUR FORM ####
        </span>
        <input type="hidden" name="form_submitted" value="1" tal:attributes="value template/id" />

    </form>
</div>

</body>
</html>

