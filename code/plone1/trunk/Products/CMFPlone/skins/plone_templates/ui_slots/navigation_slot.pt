<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns:tal="http://xml.zope.org/namespaces/tal"
      xmlns:metal="http://xml.zope.org/namespaces/metal"
      i18n:domain="plone">

<body>

<!-- This is the old navigation, it has been replaced by navigation_tree_slot. 
     Kept for backwards compatibility reasons, or in case you want flat navigation. -->

<div metal:define-macro="navigationBox"
     i18n:domain="plone"
     tal:define="isContainer here/isPrincipiaFolderish|nothing;
                 parent_url python:here.navigationParent(here, template.getId());
                 siblings here/navigationCurrent;
                 showOtherNav python:0;
                 showNav python:0;
                 listContentsPermission python:here.portal_membership.checkPermission('List folder contents', here);
                 notFolderContents python:test(template.getId()!='folder_contents', 1, 0);
                 editorView python:test(listContentsPermission and notFolderContents, 1, 0);"
     tal:condition="python:test(siblings or editorView or parent_url , 1, 0)"
     >

    <div class="box">

        <h5 i18n:translate="box_navigation">Navigation</h5>

        <div class="body">
        
            <div class="content odd">
                <strong tal:content="here/title_or_id">Current title</strong>
            </div>
    
            <div class="content even" tal:condition="siblings">
                
                <strong i18n:translate="box_other_items">Other items</strong>
                
                <div tal:repeat="sibling siblings">
                    <metal:block tal:define="iscurrent python:test(sibling.getId()==here.getId(), 1, 0);
                                             sibling_title python:'&nbsp;;'.join(sibling.title_or_id()[:18].split(' '));">
                    <a href=""
                       tal:condition="not: iscurrent"
                       tal:define="url string:${sibling/absolute_url}/view"
                       tal:attributes="href url">
                        
                        <img src="" 
                             tal:replace="structure python:path('here/%s' % sibling.getIcon(1))" />&nbsp;<tal:block
                             tal:content="structure sibling_title" />
                    </a>
                    
                    <tal:block tal:condition="iscurrent">
                    <img src=""
                         tal:replace="structure python:path('here/%s' % sibling.getIcon(1))" />&nbsp;<strong 
                         tal:content="structure sibling_title">
                         Current content id
                         </strong>
                    </tal:block>
    
                    </metal:block>
    
                </div>
            
            </div>
    
            <div class="content odd" tal:condition="parent_url">
                <a href="" 
                   tal:attributes="href parent_url">
                    <img tal:replace="structure here/linkTransparent.gif" />
                    <span i18n:translate="box_up_one_level">Up one level</span>
                </a>
            </div>
    
            <div class="content even" tal:condition="editorView">
                <div tal:condition="notFolderContents">
                    <a href="folder_contents"
                       tal:condition="here/isPrincipiaFolderish">
                        <img tal:replace="structure here/linkTransparent.gif" />
                        <span i18n:translate="box_editor_view">Editor view</span>
                    </a>
                   
                    <a href="../folder_contents"
                       tal:condition="not: here/isPrincipiaFolderish" 
                       tal:attributes="href string:${here/aq_parent/absolute_url}/folder_contents">
                        <img tal:replace="structure here/linkTransparent.gif" />
                       <span i18n:translate="box_editor_view">Editor view</span>
                    </a>
                </div>
            </div>
    
            <div class="content even" tal:condition="not: notFolderContents">
                <a href="">
                    <img tal:replace="structure here/linkTransparent.gif" />
                    <span i18n:translate="box_ordinary_view">Ordinary view</span>
                </a>
            </div>

        </div>
        
    </div>

</div>

</body>

</html>

