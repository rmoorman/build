<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns:tal="http://xml.zope.org/namespaces/tal"
       xmlns:metal="http://xml.zope.org/namespaces/metal"
       metal:use-macro="here/main_template/macros/master">
<body>
<div metal:fill-slot="header"
     tal:define="global wiki_header_present python:1">
  <div tal:replace="structure here/wikipage_header">
  </div>
</div>

<div metal:fill-slot="main"
     tal:define="editor python:here.isAllowed( 'edit' )">

    <div tal:condition="not: wiki_header_present|nothing">
    
        <span tal:condition="nothing"> In case master has no "header" macro. </span>
        <div tal:replace="structure here/wikipage_header"> </div>
    </div>

    <h1>
        <span tal:condition="python: not editor"> View </span>
        <span tal:condition="editor"> Edit </span>
        the <span tal:content="here/getId"> PageName </span> wiki page 
    </h1>

    <p tal:condition="python: not editor">
        <strong> You can view the page source, below, but not edit it. </strong>
        (<span tal:replace="python: here.whichWho('edit')" />
        edit this page.)
    </p>

    <div tal:condition="editor">

        <form method="POST"
              action="wikipage_editcomment_handler"
              enctype="multipart/form-data"
	      tal:attributes="action string:${here/getId}/wikipage_editcomment_handler">

            <input type="hidden" name="timeStamp"
                   tal:attributes="value here/editTimestamp" />
            <input type="hidden" name="page"
                   tal:attributes="value here/getId" />

            <p>Format: <strong tal:content="here/page_type"> page_type </strong></p>
        
            Title:<br />
            <input name="title"
                   tal:attributes="value here/title" />
                   
            <br />
            Body:<br />
            <textarea wrap="soft" name="text"
                      rows="18" cols="80"
                      tal:attributes="rows request/zwiki_height | default;
                                      cols request/zwiki_width  | default"
                      tal:content="here/text"
                      ></textarea>


              <input type="submit"
                     class="context"
                     name="edit"
                     value="Save"
              />
             <p>Log Message</p>

               <textarea wrap="soft" name="log"
                         rows="3"
                         cols="80"></textarea>

               Log for landmark changes - enter a note characterizing your
               change.  It will be connected with the page version,
               exposing the version for browsing in the condensed
               <a href="wikipage_history">page history</a>.
        </form>

</div>

</div>
</body>
</html>
