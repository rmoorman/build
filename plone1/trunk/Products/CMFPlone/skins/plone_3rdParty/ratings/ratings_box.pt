
<div metal:define-macro="ratingsBox"
     tal:define="portalContent here/isPortalContent | nothing;
                 rating_scale python:6;"
     tal:condition="python:test( (template.getId()==here.portal_types.getTypeInfo(here.getId()).getActionById('view') and container.portal_ratings.isRatingAllowedFor(here)), 1, 0);">
    <p>
      <strong> Average </strong>
      <span tal:replace="python:here.portal_ratings.getRatingFor(here).getAverage()"> Average 4 </span>
    </p>
    <form method="POST" 
          action="rate_content"
          name="rating_form"
          tal:attributes="action string:${here/absolute_url}/rate_content" >

          <table>
            <tr class="even">
              <td colspan="2">
                <strong> Worst </strong> 
              </td>
              <td colspan="2"> &nbsp; </td>
              <td colspan="2">
                <strong> Better </strong> 
              </td>               
            </tr>
            <tr class="odd">
              <td tal:repeat="rating python:range(0, rating_scale)"
                  align="center"> 
                <span tal:replace="rating"> 1 </span>
              </td>
            </tr>
            <tr class="even">
              <td tal:repeat="rating python:range(0, rating_scale)"> 
               <input type="radio" 
                      name="rating" 
                      accesskey="rating" 
                      value="rating"
                      tal:attributes="accesskey string:rating; value rating;" />  
              </td>
            </tr>
            <tr class="odd">
              <td colspan="6" align="center"
                  tal:attributes="colspan rating_scale">
                 <input type="submit" name="rate" value="Rate this content" />
              </td>
            </tr>
          </table>
    </form>
</div>

