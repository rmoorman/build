<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en-US"
      lang="en-US"
      metal:use-macro="here/main_template/macros/master"
      i18n:domain="plone">

<body>

    <metal:block fill-slot="base">
        <tal:block tal:define="dummy python:request.set('disable_border', 1)"
                   tal:replace="nothing">
        Disable the tabs
        </tal:block>    
    </metal:block>

    <div metal:fill-slot="main"
          tal:define="members python:container.portal_membership.getRoster();
                      Batch python:modules['Products.CMFPlone'].Batch;
                      DateTime python:modules['DateTime'].DateTime;
                      b_start python:request.get('b_start', 0);">
    
        <h1 i18n:translate="heading_member_listing">Member Listing</h1>
		
		<p i18n:translate="description_member_listing">
        A list of the visible members. 
        </p>

		<form name="search_results" action="#" method="post"
              tal:condition="members"
              tal:define="batch python:Batch(members, 20, int(b_start), orphan=1)">
				
		<p>
        <span i18n:translate="label_visible_members">Visible Members</span>:
        <strong tal:content="python:len(members)">number of members</strong> 
        </p>
		  
        <!-- Navigation -->
        <div metal:use-macro="here/batch_macros/macros/navigation" />
		  
        <div>
        <metal:block tal:repeat="result batch">
            <span class="card" tal:define="home python:container.portal_membership.getHomeUrl(result['id'], verifyPermission=1);
                                           portrait python: here.portal_membership.getPersonalPortrait(result['id']);"> 
                <a href="#" tal:attributes="href home">                    
                    <img src="defaultUser.gif" 
                         alt="" 
                         border="0" 
                         width="75" 
                         height="100" 
                         tal:attributes="src portrait/absolute_url" />
                    <br />  
                    <span tal:content="python:result['id']"> member id</span>
                </a>
                <br />	
            </span>
        </metal:block>
        </div>
        
        <!-- Navigation -->
        <div metal:use-macro="here/batch_macros/macros/navigation" />

        </form>	    
	<div class="spacer">&nbsp;</div>
    </div>
</body>
</html>
