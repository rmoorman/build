<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en-US"
      lang="en-US">

<dtml-call "REQUEST.set('actions', portal_actions.listFilteredActionsFor(REQUEST.PARENTS[0]))">
<dtml-call "REQUEST.set('portal_url', portal_url())">
<dtml-call "REQUEST.set('member', portal_membership.getAuthenticatedMember())">
<dtml-call "REQUEST.set('portal', portal_url.getPortalObject)">
<dtml-call "REQUEST.set('site_properties', portal_properties.site_properties)">
<dtml-call "REQUEST.set('ztu', 'modules/ZTUtils')">
<dtml-call "REQUEST.set('obj_actions', REQUEST['actions'].get('object', []))">
<dtml-call "REQUEST.set('folder_actions', REQUEST['actions'].get('folder', []))">
<dtml-call "REQUEST.set('wf_actions', REQUEST['actions'].get('workflow', []))">
<dtml-call "REQUEST.set('local_actions', REQUEST['actions'].get('object_tabs', []))">
<dtml-call "REQUEST.set('isFolder', getTypeInfo().getId() in REQUEST['site_properties'].use_folder_tabs)">
<dtml-call "REQUEST.set('template_id', REQUEST['URL0'].split('/')[-1])">
<dtml-call "REQUEST.set('slots_mapping', prepare_slots())">
<dtml-call "REQUEST.set('show_border', showEditableBorder( template_id=REQUEST['template_id'], actions=REQUEST['actions'] ))">
<dtml-call "REQUEST.set('tabindex',  makeIterator(pos=30000))">

<dtml-var "macro_renderer(template='here/header', macro='html_header')" >

<body>

  <dtml-var "macro_renderer(template='here/header',
    macro='portal_header', tabindex=REQUEST['tabindex'] )" >

  <table class="columns">

        <tbody>

            <tr>

                <dtml-var "macro_renderer(template='here/main_template', macro='left_column', slots_mapping=REQUEST['slots_mapping'], site_properties=REQUEST['site_properties'], portal_url=REQUEST['portal_url'])" >

                <td class="main" >

                    <dtml-if "REQUEST['show_border']">
                      <dtml-var "macro_renderer(template='here/main_template', macro='contentTabs', actions=REQUEST['actions'], show_border=REQUEST['show_border'], template_id=REQUEST['template_id'], isFolder=REQUEST['isFolder'], folder_actions=REQUEST['folder_actions'], obj_actions=REQUEST['obj_actions'], local_actions=REQUEST['local_actions'])" >

                      <div id="contentBar">
			&nbsp;
		      </div>

		      <dtml-call "REQUEST.set('document_class', 'editableDocument')">
                    </dtml-if>

                   <div class="<dtml-var "REQUEST.get('document_class', 'document')">">

                    <dtml-var "macro_renderer(template='here/header', macro='portal_message')" >

                    <dtml-var "macro_renderer(template='here/main_template', macro='documentActions')" >

                        <dtml-comment>

                        this is where your content will start.  so you must remember to close:
                           * this div
                           * this td
                           * this tr, and table
                        </dtml-comment>

