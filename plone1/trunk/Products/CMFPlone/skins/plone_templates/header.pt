<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html tal:define="Iterator python:modules['Products.CMFPlone'].IndexIterator;
                  tabindex python:Iterator();">

<head metal:define-macro="html_header"
      tal:define="global portal_url here/portal_url;
                  ztu ztu|modules/ZTUtils;
                  current_skin python:ztu.make_query(skin=request.get(here.portal_skins.getRequestVarname(), ''))">
    <meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1"
          tal:define="charset site_properties/default_charset|string:utf-8"
          tal:attributes="content string:text/html;;charset=${charset}" />

    <title tal:define="portal_title here/portal_properties/title;
                       here_title python:test( portal_title != here.title_or_id()
                                             , here.title_or_id()
                                             , template.title_or_id());"
           tal:content="string:$portal_title - $here_title">Title of page</title>

    <metal:block metal:define-slot="base" />

    <meta tal:condition="here/listMetaTags|nothing"
          tal:repeat="keyval here/listMetaTags"
          tal:attributes="name python:keyval[0];
                           content python:keyval[1];" />

    <!-- Basic crude style for Netscape4.x - This can be removed
         if you don't want the special NS4 look - it will still work,
	 just be plain text instead. -->
    <link rel="Stylesheet" type="text/css" href="" tal:attributes="href string:$portal_url/ploneNS4.css" />

    <!-- Main style sheets for CSS2 capable browsers -->
    <style type="text/css" media="screen" tal:content="string: @import url(${here/portal_url}/plone.css?${current_skin});"></style>

    <!-- Custom style sheet if available -->
    <style type="text/css" media="all" tal:condition="exists: here/ploneCustom.css" tal:content="string:@import url(${here/portal_url}/ploneCustom.css);"></style>

    <!-- Style sheet used for printing -->
    <link rel="stylesheet" type="text/css" media="print" href="" tal:attributes="href string:$portal_url/plonePrint.css" />

    <!-- Style sheet used for presentations (Opera is the only browser supporting this at the moment) -->
    <link rel="stylesheet" type="text/css" media="projection" href="" tal:attributes="href string:$portal_url/plonePresentation.css" />

    <link rel="shortcut icon" href="" type="image/x-icon" tal:attributes="href string:$portal_url/favicon.ico" />

    <link rel="home" href="" title="Front Page" tal:attributes="href string:$portal_url" />
    <link rel="search" href="" title="Search this site" tal:attributes="href string:$portal_url/search_form" />

    <!-- Disable IE6 image toolbar -->
    <meta http-equiv="imagetoolbar" content="no" />

    <metal:block metal:define-slot="css_slot" tal:replace="nothing">
    Inserts CSS specified from a page.
    </metal:block>

    <metal:block metal:define-slot="head_slot" tal:replace="nothing">
    Flexibility for published templates to inject stuff into the head tag.
    </metal:block>

    <metal:block metal:define-slot="javascript_head_slot" tal:replace="nothing">
    Inserts javascript specified from a page.
    </metal:block>

    <!-- Common Plone ECMAScripts -->
    <script type="text/javascript" tal:attributes="src here/plone_javascripts.js/absolute_url"></script>

    <tal:block tal:define="member here/portal_membership/getAuthenticatedMember;
                           defaulttips python:here.portal_memberdata.getProperty('formtooltips');
                           showdefault python:test(defaulttips, 'true', 0);
                           formtooltips python:member.getProperty('formtooltips', showdefault)"
               tal:omit-tag="">
      <script type="text/javascript"
              tal:condition="formtooltips"
              tal:attributes="src here/plone_formtooltip.js/absolute_url"></script>
      <metal:block tal:condition="not:formtooltips">
        <tal:block tal:replace="structure string:&lt;script language='javascript' type='text/javascript' &gt;" />
          <metal:block >function formtooltip(el,flag){}</metal:block>
        <tal:block tal:replace="structure python:'&lt;/script&gt;'" />
      </metal:block>

    </tal:block>
</head>

<div metal:define-macro="portal_header"
     i18n:domain="plone"
     tal:define="portal_url portal_url|here/portal_url;
                 ztu ztu|modules/ZTUtils;
                 tabindex tabindex|options/tabindex;
                 current_skin python:ztu.make_query(skin=request.get(here.portal_skins.getRequestVarname(), ''))">

     <tal:block tal:condition="not: actions|nothing">
         <span tal:define="global actions actions|here/portal_actions/listFilteredActionsFor"
                  tal:replace="nothing" >
             This is here just in case actions is not defined.  This would happen if you were calling from a DTML Document
         </span>
     </tal:block>

        <div class="top">

            <div class="searchBox">
                <form name="searchform"
                      action="search"
                      tal:attributes="action string:${portal_url}/search" >

                    <input id="searchGadget"
                           name="SearchableText"
                           type="text"
                           size="20"
                           value=""
			   alt="Search"
			   title="Search"
                           tal:attributes="value request/SearchableText|nothing; tabindex tabindex/next" />

                    <input class="context searchButton"
                           type="submit"
                           value="Search"
                           tal:attributes="tabindex tabindex/next"
                           i18n:attributes="value" />
                </form>
            </div>

            <a href="/"
               tal:attributes="href portal_url"
               tal:define="logo here/logo.jpg;
                           uri logo/absolute_url" >
                <img src="logo.jpg"
                     class="logo"
                     border="0"
                     alt=""
                     tal:attributes="width logo/width;
                                     height logo/height;
                                     src string:${logo/absolute_url}?$current_skin" />
            </a>
        </div>

        <hr size="" class="netscape4" />

        <div class="tabs"
             metal:define-macro="portal_tabs"
             tal:define="portal_tabs actions/portal_tabs|nothing;
                         global selected_tabs python:here.selectedTabs(template.getId(), here);
                         selected_portal_tab selected_tabs/portal;" >

        <metal:block tal:repeat="tab portal_tabs">
            <a href="" class=""
               tal:attributes="href tab/url;
                               class python:test(selected_portal_tab==tab['id'], 'selected', 'plain')">
                <span tal:omit-tag="" i18n:translate=""><span tal:replace="tab/name">dummy</span></span>
            </a>
        </metal:block>

        </div>

        <div class="personalBar"
             metal:define-macro="personalBar"
             tal:define="portal_url portal_url|here/portal_url;
                         user_actions actions/user;
                         global_actions actions/global;
                         display_actions python:user_actions[:-1]+global_actions+user_actions[-1:];">&nbsp;

            <a href=""
               tal:omit-tag="not: here/portal_membership/getHomeFolder"
               tal:condition="not:here/portal_membership/isAnonymousUser"
               tal:attributes="href string:${here/portal_membership/getHomeUrl}">
                <img tal:replace="structure here/user.gif" />

                <span tal:replace="user/getUserName">john</span>
            </a>

            <span tal:condition="here/portal_membership/isAnonymousUser" i18n:translate="you_are_not_logged_in">You are not logged in</span>

            <metal:block tal:repeat="action python:display_actions">
            <a href=""
               tal:attributes="href action/url">
                <img tal:replace="structure here/linkOpaque.gif" />

                <span tal:omit-tag="" i18n:translate=""><span tal:replace="action/name">dummy</span></span>
            </a>
            </metal:block>
        </div>

        <div class="pathBar"
             metal:define-macro="pathBar"
             tal:define="breadcrumbs python:here.breadcrumbs(here);
                         portal_url portal_url|here/portal_url;">

            <a href="#"
               tal:condition="here/portal_membership/getHomeFolder"
               tal:attributes="href string:${here/absolute_url}/addtoFavorites"
               tal:define="addFavorite here/addFavorite.gif">

                <img tal:replace="structure python:addFavorite.tag(css_class='addFavorite', title='Add this location to My Favorites')" />
            </a>
	    <span tal:omit-tag="" i18n:translate="you_are_here">You are here:</span>
	        <span tal:condition="breadcrumbs" tal:omit-tag="">
                <a i18n:translate="tabs_home" tal:attributes="href portal_url">Home</a>
                <strong>&raquo;</strong>
            </span>

            <span tal:condition="not: breadcrumbs" i18n:translate="tabs_home" tal:omit-tag="">
                Home
            </span>

            <span tal:repeat="crumb breadcrumbs">

                <metal:block tal:define="global is_last repeat/crumb/end" />

                <a href="#"
                   tal:condition="python:not is_last"
                   tal:attributes="href python:crumb[1]"
                   tal:content="structure python:crumb[0]"
                   i18n:translate="">crumb</a>
                <strong tal:condition="python:not is_last"> &raquo; </strong>
                <span tal:condition="python: is_last"
                      tal:content="structure python:crumb[0]"
                      i18n:translate="">crumb</span>

            </span>

        </div>

        <hr size="" class="netscape4" />

    </div>

    <div class="message"
         i18n:domain="plone"
         metal:define-macro="portal_message"
         tal:define="portal_message request/portal_status_message | nothing"
         tal:condition="portal_message">

        <img tal:replace="structure here/info.gif" />

        <strong tal:content="portal_message" i18n:translate=""></strong>
    </div>

</html>