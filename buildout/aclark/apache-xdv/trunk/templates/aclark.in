NameVirtualHost *:${ports:production}

# manage.aclark.net
<VirtualHost *:${ports:production}>

    ServerName manage.aclark.net

   <Proxy *>
        Allow from all
    </Proxy>

    RewriteEngine On
    RewriteRule ^(.*) http://127.0.0.1:8082/VirtualHostBase/http/manage.aclark.net:80/Plone/VirtualHostRoot/$1 [P,L]

</VirtualHost>

# aclark.net
<VirtualHost *:${ports:production}>

    Alias /static/ /srv/aclark/static/

    ServerName aclark.net
    ServerAlias www.aclark.net

    FilterDeclare THEME
    FilterProvider THEME XSLT resp=Content-Type $text/html

    TransformOptions +ApacheFS +HTML +HideParseErrors
    TransformSet /theme-aclark.xsl
    TransformCache /theme-aclark.xsl /srv/apache/etc/theme-aclark.xsl

    <LocationMatch "/">
        FilterChain THEME
    </LocationMatch>

   <Proxy *>
        Allow from all
    </Proxy>
    RewriteEngine On
    RewriteRule ^/static/(.*) /srv/aclark/static/$1 [L]
    RewriteRule ^(.*) http://127.0.0.1:8082/VirtualHostBase/http/aclark.net:80/Plone/VirtualHostRoot/$1 [P,L]
    CustomLog /srv/apache/var/log/aclark.net-access_log combined
    ErrorLog /srv/apache/var/log/aclark.net-error_log

</VirtualHost>

<Directory "/srv/aclark/static">
    Options Indexes FollowSymLinks
    AllowOverride None
    Order allow,deny
    Allow from all
</Directory>

# blog.aclark.net
<VirtualHost *:${ports:production}>

    ServerName blog.aclark.net
    DocumentRoot /srv/blog/parts/wordpress

    Alias /static/ /srv/aclark/static/

    FilterDeclare THEME
    FilterProvider THEME XSLT resp=Content-Type $text/html

    TransformOptions +ApacheFS +HTML +HideParseErrors
    TransformSet /theme-blog.xsl
    TransformCache /theme-blog.xsl /srv/apache/etc/theme-blog.xsl

    <LocationMatch "/">
        FilterChain THEME
    </LocationMatch>

    <Location "/wp-admin">
        FilterChain !
    </Location>

    <LocationMatch "/wp-login.php">
        FilterChain !
    </LocationMatch>

    <Location "/wp-content">
        FilterChain !
    </Location>

    <Location "/wp-includes">
        FilterChain !
    </Location>

    CustomLog /srv/apache/var/log/blog.aclark.net-access_log combined
    ErrorLog /srv/apache/var/log/blog.aclark.net-error_log

</VirtualHost>

<Directory "/srv/blog/parts/wordpress">
    Options Indexes FollowSymLinks
    AllowOverride None
    Order allow,deny
    Allow from all

    <IfModule mod_rewrite.c>
        RewriteEngine On
        RewriteBase /
        RewriteRule ^index\.php$ - [L]
        RewriteCond %{REQUEST_FILENAME} !-f
        RewriteCond %{REQUEST_FILENAME} !-d
        RewriteRule . /index.php [L]
    </IfModule>

</Directory>

# belcampboys.com
<VirtualHost *:${ports:production}>

    ServerAdmin aclark@aclark.net
    DocumentRoot /srv/belcampboys.com
    ServerName belcampboys.com
    ServerAlias www.belcampboys.com

</VirtualHost>

<Directory "/srv/belcampboys.com">
    Options Indexes FollowSymLinks
    AllowOverride None
    Order allow,deny
    Allow from all

</Directory>

# dist.aclark.net
<VirtualHost *:${ports:production}>

    ServerName dist.aclark.net
    RedirectMatch ^[/]*$ https://dist.aclark.net

</VirtualHost>

<Directory "/srv/dist">

    Options Includes Indexes FollowSymLinks MultiViews
    AllowOverride All
    Order allow,deny
    Allow from all
    IndexOptions FancyIndexing
    IndexIgnore .packt-pub

</Directory>

# lister-class.aclark.net
<VirtualHost *:${ports:production}>

    ServerAdmin aclark@aclark.net
    DocumentRoot /srv/lister-class
    ServerName lister-class.aclark.net

</VirtualHost>

<Directory "/srv/lister-class">

    Options Includes Indexes FollowSymLinks MultiViews
    AllowOverride All
    Order allow,deny
    Allow from all
    IndexOptions FancyIndexing

</Directory>

# lists.aclark.net

#<VirtualHost *:${ports:production}>
#
#    ServerAdmin aclark@aclark.net
#    DocumentRoot /srv/lister-class
#    ServerName lists.aclark.net
#
#</VirtualHost>

# old.aclark.net
<VirtualHost *:${ports:production}>

    ServerName old.aclark.net

    <Proxy *>
        Allow from all
    </Proxy>

    RewriteEngine On
    RewriteRule ^(.*) http://127.0.0.1:9081/VirtualHostBase/http/old.aclark.net:80/aclark.net/VirtualHostRoot/$1 [P,L]

</VirtualHost>

